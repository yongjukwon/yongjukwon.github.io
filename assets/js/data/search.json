[ { "title": "Java's Concurrency - 4 (Liveness)", "url": "/posts/java-concurrency-4-liveness/", "categories": "Programming, Java", "tags": "Java, Thread", "date": "2022-08-22 21:03:00 -0700", "snippet": "ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” ì €ë²ˆì— ê¸€ì´ ê¸¸ì–´ì ¸ í¬í•¨í•˜ì§€ ì•Šì€ Livenessì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.â’ˆ Liveness?ë™ì‹œì— ì‹¤í–‰ë˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹œê°„ì ìœ¼ë¡œ ì ì ˆí•˜ê²Œ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì„ Livenessë¼ê³  í•œë‹¤. í•œêµ­ë§ë¡œ í•´ì„í•œ ê²ƒì„ ì°¾ì•„ë³´ë‹ˆ í™œë™ì„±ì´ë¼ê³  í•œë‹¤. ì•„ë˜ì—ì„œ ê°€ì¥ í”í•œ liveness ë¬¸ì œì¸ deadlockì— ëŒ€í•´ ì•Œì•„ë³´ê³  ë‹¤ë¥¸ ë‘ ê°€ì§€ ë¬¸ì œì¸ starvationê³¼ livelockë„ ê°„ë‹¨íˆ ì•Œì•„ë³´ë„ë¡ í•˜ì.â’‰ DeadlockDeadlockì€ ë‘ ê°œ í˜¹ì€ ê·¸ ì´ìƒì˜ ì“°ë ˆë“œê°€ ì„œë¡œë¥¼ ê¸°ë‹¤ë¦¬ë©° ì˜ì›íˆ blocked ëœ ìƒíƒœë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì¹œêµ¬ì¸ Aì™€ Bê°€ ìˆê³  ì´ ë‘˜ ì‚¬ì´ì—ëŠ” ê¼­ ë”°ë¼ì•¼ë§Œ í•˜ëŠ” í•œ ê°€ì§€ ê·œì¹™ì´ ìˆë‹¤ê³  ê°€ì •í•´ë³´ì. ì´ ê·œì¹™ì€ í•œ ì‚¬ëŒì´ ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ê³ ê°œë¥¼ ìˆ™ì—¬ ì¸ì‚¬í•˜ë©´ ì¸ì‚¬ë¥¼ ë°›ì€ ì‚¬ëŒì´ ì¸ì‚¬í•  ë•Œê¹Œì§€ ì²˜ìŒ ì¸ì‚¬ë¥¼ í•œ ì‚¬ëŒì€ ê³„ì† ê³ ê°œë¥¼ ìˆ™ì´ê³  ìˆì–´ì•¼ í•œë‹¤. ì´ ê·œì¹™ì˜ ë§¹ì ì€ ë¬´ì—‡ì¼ê¹Œ?ë°”ë¡œ ë‘ ì‚¬ëŒì´ ë™ì‹œì— ì¸ì‚¬ë¥¼ í•˜ëŠ” ê²½ìš°ë¥¼ ìƒê°í•˜ì§€ ì•Šì•˜ë‹¤. ê·¸ë ‡ë‹¤ë©´ ë‘ ì‚¬ëŒì´ ë™ì‹œì— ì¸ì‚¬ë¥¼ í•˜ë©´ ì–´ë–»ê²Œ ë ê¹Œ? ì•„ë˜ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ì.public class Deadlock { static class Friend { private final String name; public Friend(String name) { this.name = name; } public String getName() { return this.name; } public synchronized void bow(Friend bower) { System.out.printf(\"%s: %s has bowed to me!\\n\", this.name, bower.getName()); bower.bowBack(this); } public synchronized void bowBack(Friend bower) { System.out.printf(\"%s: %s has bowed back to me!\\n\", this.name, bower.getName()); } } public static void main(String[] args) { final Friend a = new Friend(\"A\"); final Friend b = new Friend(\"B\"); // bê°€ aì—ê²Œ ì¸ì‚¬í•œë‹¤, ì¸ì‚¬ í›„ aëŠ” bì—ê²Œ ë‹¤ì‹œ ì¸ì‚¬ í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ë°‘ ì“°ë ˆë“œê°€ ì‹œì‘ë˜ë©´ì„œ bì˜ lockì„ owní•œ í›„ releaseí•˜ì§€ ì•Šìœ¼ë©´ b.bowBack(a)ê°€ ì‹¤í–‰ë  ìˆ˜ ì—†ë‹¤. new Thread(() -&gt; a.bow(b)).start(); // aê°€ bì—ê²Œ ì¸ì‚¬í•œë‹¤, ì¸ì‚¬ í›„ bëŠ” aì—ê²Œ ë‹¤ì‹œ ì¸ì‚¬ í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ìœ„ ì“°ë ˆë“œê°€ ëë‚˜ì§€ ì•Šì•˜ê¸° ë•Œë¬¸ì—(aì˜ lockì„ releaseí•˜ì§€ ì•Šì•˜ê¸° ë–„ë¬¸ì—) a.bowBack(b)ê°€ ì‹¤í–‰ë  ìˆ˜ ì—†ë‹¤. new Thread(() -&gt; b.bow(a)).start(); }}IntelliJì˜ debuggerë¥¼ í†µí•´ ì´ ë‘ ì“°ë ˆë“œì˜ ìƒíƒœë¥¼ ë³´ë©´ ì•„ë˜ì™€ ê°™ë‹¤. Thread-0@780ì€ Thread-1@783ì´ lockì„ releaseí•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆê³ , ë˜‘ê°™ì´ ë°˜ëŒ€ë¡œ Thread-1@783ì€ Thread-0@780ì´ lockì„ releaseí•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦¬ê³  ìˆë‹¤.ì´ ìƒíƒœë¥¼ ìš°ë¦¬ëŠ” deadlockì´ë¼ê³  ë¶€ë¥¸ë‹¤.Deadlockâ’Š Starvation and LivelockStarvationê³¼ livelockì€ deadlockë³´ë‹¤ëŠ” ëœ í”í•œ ë¬¸ì œì´ì§€ë§Œ ì—¬ì „íˆ ê°œë°œìë¼ë©´ ë§ˆì£¼ì¹  ìˆ˜ ìˆëŠ” ë¬¸ì œë“¤ì´ë‹¤.â‘´ Starvation Starvationì€ ì“°ë ˆë“œê°€ ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ê³¼ ê³µìœ í•˜ëŠ” ìì›ë“¤ì— ì ‘ê·¼í•  ìˆ˜ ì—†ì–´ì„œ ë” ì´ìƒ ì§„í–‰í•  ìˆ˜ ì—†ëŠ” ìƒíƒœì´ë‹¤. ë³´í†µ â€˜greedyâ€™ threadsì— ì˜í•´ ì¼ì–´ë‚˜ëŠ” ìƒí™©ì´ë‹¤.í•˜ë‚˜ì˜ ì˜ˆë¡œ, ì–´ë–¤ ì˜¤ë¸Œì íŠ¸ê°€ synchronized methodë¥¼ ì œê³µí•˜ëŠ”ë° ë‚´ë¶€ì˜ ì½”ë“œê°€ ì‹œê°„ì´ ì˜¤ë˜ ê±¸ë¦¬ëŠ” ì‘ì—…ì´ë¼ê³  ê°€ì •í•´ë³´ì. ê·¸ëŸ°ë° ì–´ë–¤ í•œ ì“°ë ˆë“œê°€ ì´ ë©”ì†Œë“œë¥¼ ìì£¼ ë¶ˆëŸ¬ì„œ ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì´ ì ‘ê·¼í•  ë•Œë§ˆë‹¤ ì ‘ê·¼ì´ ë¶ˆê°€ëŠ¥í•  ìˆ˜ ìˆëŠ”ë° ì´ ìƒí™©ì„ starvationì´ë¼ê³  ë¶€ë¥¸ë‹¤.â‘µ Livelock Livelockì€ ë‘ ì“°ë ˆë“œê°€ ì„œë¡œì—ê²Œ ì˜ì¡´í•  ë–„ ìƒê¸°ëŠ” ë¬¸ì œì¸ë°, deadlockê³¼ëŠ” ë‹¬ë¦¬ ì“°ë ˆë“œë“¤ì´ blocked ìƒíƒœê°€ ë˜ì§€ëŠ” ì•ŠëŠ”ë‹¤. ì•„ë˜ ì½”ë“œ ì˜ˆì‹œë¥¼ í†µí•´ì„œ ì•Œì•„ë³´ì.ê²½ì°°ê³¼ ë²”ì¸ ê·¸ë¦¬ê³  ë‚©ì¹˜ ëœ ì‚¬ëŒì´ ìˆë‹¤. ë²”ì¸ì€ ê²½ì°°ì´ ëˆì„ ì£¼ë©´ ë‚©ì¹˜ëœ ì‚¬ëŒì„ í’€ì–´ì£¼ê¸°ë¡œ í–ˆê³ , ê²½ì°°ì€ ëˆì„ ì£¼ë ¤ê³  í•œë‹¤. ì•„ë˜ ì½”ë“œë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´ ì–´ë–¤ ìƒí™©ì´ ë²Œì–´ì§ˆê¹Œ?/** * @author www.codejava.net (All code below) */public class Criminal { // ë‚©ì¹˜ë²” private boolean hostageReleased = false; public void releaseHostage(Police police) { while (!police.isMoneySent()) { System.out.println(\"Criminal: waiting police to give ransom\"); try { Thread.sleep(1000); // ê²½ì°°ë¡œë¶€í„° ëˆì„ ê¸°ë‹¤ë¦¬ëŠ”ì¤‘ } catch (InterruptedException ex) { ex.printStackTrace(); } } System.out.println(\"Criminal: released hostage\"); this.hostageReleased = true; } public boolean isHostageReleased() { return this.hostageReleased; }}public class Police { private boolean moneySent = false; public void giveRansom(Criminal criminal) { while (!criminal.isHostageReleased()) { System.out.println(\"Police: waiting criminal to release hostage\"); try { Thread.sleep(1000); } catch (InterruptedException ex) { ex.printStackTrace(); } } System.out.println(\"Police: sent money\"); this.moneySent = true; } public boolean isMoneySent() { return this.moneySent; }}public class HostageRescueLivelock { static final Police police = new Police(); static final Criminal criminal = new Criminal(); public static void main(String[] args) { Thread t1 = new Thread(() -&gt;police.giveRansom(criminal)).start(); Thread t2 = new Thread(() -&gt; criminal.releaseHostage(police)).start(); }}ì„œë¡œì˜ ìƒíƒœë¥¼ holdí•˜ê³  ìˆê³  ì—…ë°ì´íŠ¸ë¥¼ í•˜ì§€ ëª» í•˜ê¸° ë•Œë¬¸ì— ê²°êµ­ì—ëŠ” ì•„ë˜ì™€ ê°™ì´ ë‘ ì“°ë ˆë“œ ëª¨ë‘ ê³„ì† ê°™ì€ statementë§Œ í”„ë¦°íŠ¸ í•  ê²ƒì´ë‹¤. ì‹¤ìƒí™œì˜ ì˜ˆë¡œ ë“¤ì–´ë³´ìë©´ ì¢ì€ ë³µë„ì—ì„œ ì„œë¡œ ë‹¤ ë°©í–¥ì—ì„œ ì˜¤ê³  ìˆë˜ ë‘ ì‚¬ëŒì´ ê¸¸ì„ ë¹„ì¼œì£¼ê¸° ìœ„í•´ ë°©í–¥ì„ ë°”ê¾¸ëŠ”ë° ì„œë¡œ ê³„ì† ê°™ì´ ë°”ê¾¸ëŠ” ë°”ëŒì— ë‘˜ ë‹¤ ì§€ë‚˜ê°ˆ ìˆ˜ ì—†ê²Œ ë˜ëŠ” ìƒíƒœì— ë¹„ìœ í•  ìˆ˜ ìˆë‹¤.Livelockâ’‹ RetrospectiveOracleì˜ ê³µì‹ documentationì„ ì½ìœ¼ë©´ì„œ Concurrencyì— ëŒ€í•´ì„œ ì •ë¦¬í•´ë´ì•¼ì§€ í•˜ë©´ì„œ ì‹œì‘í•œ ì‹œë¦¬ì¦ˆ ì˜€ëŠ”ë° 4ê°œê¹Œì§€ ì“¸ ì¤„ì€ ëª°ëë‹¤. ì´ ë’¤ë¡œë„ ê°™ì€ ì¹´í…Œê³ ë¦¬ì˜ ë‚´ìš©ì´ ìˆëŠ”ë° ì§€ê¸ˆê¹Œì§€ì˜ ë‚´ìš©ë³´ë‹¤ High-levelì˜ Concurrencyë¥¼ ë‹¤ë£¨ëŠ” ë‚´ìš©ì´ë‹¤. ë‚´ìš©ì´ ë§ì§€ëŠ” ì•Šì•„ì„œ ë‘ ë²ˆ ì •ë„ í¬ìŠ¤íŒ…ì„ ë” í•˜ë©´ ë§ˆë¬´ë¦¬í•  ìˆ˜ ìˆì„ ê²ƒ ê°™ë‹¤. ë¸”ë¡œê·¸ ìŠ¤í„°ë””ëŠ” ë§ˆì§€ë§‰ ì£¼ ì´ì§€ë§Œ ê³„ì† ì¨ ë‚˜ê°€ì„œ ë” ê¹Šì´ ì•Œê³  ìˆëŠ” ìë°” ê°œë°œìê°€ ë˜ì•¼ì§€.!â’Œ ReferenceOracle Java DocumentationUnderstanding Deadlock, Livelock and Starvation with Code Examples in Java" }, { "title": "Java's Concurrency - 3 (Synchronization)", "url": "/posts/java-concurrency-3-synchronization/", "categories": "Programming, Java", "tags": "Java, Thread", "date": "2022-08-05 23:07:00 -0700", "snippet": "â’ˆ What is Synchronization?ì—¬ëŸ¬ ì“°ë ˆë“œë“¤ì€ ì˜¤ë¸Œì íŠ¸ë‚˜ í•„ë“œê°™ì€ resourceë“¤ì„ ì„œë¡œ ê³µìœ í•œë‹¤. ì´ëŠ” ë‘ ê°€ì§€ ë¬¸ì œë¥¼ ì¼ìœ¼í‚¬ ìˆ˜ ìˆëŠ”ë°, Â¹ ì“°ë ˆë“œë“¤ë¼ë¦¬ì˜ ì¶©ëŒê³¼ Â² ë©”ëª¨ë¦¬ì˜ inconsistencyì´ë‹¤. Synchronizationì€ ì´ ë¬¸ì œë“¤ì„ í•´ê²°í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ë‹¤. Synchronizationì€ thread contention ì„ ì œê³µí•¨ìœ¼ë¡œì¨ ì´ë£¨ì–´ì§€ëŠ”ë° ì´ëŠ” ë‘ ê°œ ì´ìƒì˜ ì“°ë ˆë“œê°€ ê°™ì€ resourceì— ë™ì‹œì— ì ‘ê·¼í•˜ë ¤ê³  ì‹œë„í•  ë•Œ í•˜ë‚˜ í˜¹ì€ ê·¸ ì´ìƒì˜ ì“°ë ˆë“œë¥¼ ìƒëŒ€ì ìœ¼ë¡œ ëŠë¦¬ê²Œ ì‹¤í–‰ì‹œí‚¤ê±°ë‚˜ í˜¹ì€ ì‹¤í–‰ì„ ëŠ¦ì¶”ëŠ” ë°©ë²•ì´ë‹¤.ì´ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ë‘ ê°€ì§€ ë¬¸ì œì ì´ ì–´ë–»ê²Œ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ”ì§€ ë¨¼ì € ì•Œì•„ë³´ê³ , í•´ê²° ë°©ë²•ê¹Œì§€ ì•Œì•„ë³´ë„ë¡ í•˜ì.â’‰ Thead interferenceì•„ë˜ì™€ ê°™ì´ ê°„ë‹¨í•œ Counter í´ë˜ìŠ¤ê°€ ìˆë‹¤. Variable cì˜ ê°’ì„ ë³€ê²½í•˜ëŠ” ë‘ ë©”ì†Œë“œ(increment, decrement)ì™€ accessor(value)ê°€ ì¡´ì¬í•œë‹¤. incrementê°€ ë¶ˆë ¤ì§€ë©´ cì— 1ì´ ë”í•´ì§€ê³ , decrementê°€ ë¶ˆë ¤ì§€ë©´ cì—ì„œ 1ì´ ë¹¼ì§„ë‹¤. í•˜ì§€ë§Œ ì—¬ëŸ¬ ì“°ë ˆë“œê°€ ë™ì‹œì— ì´ Counter ì˜¤ë¸Œì íŠ¸ë¥¼ reference í•œë‹¤ë©´ ì´ëŸ° ë‹¹ì—°í•œ ê³„ì‚°ë“¤ì´ ì›í•˜ëŠ”ëŒ€ë¡œ ì‹¤í–‰ë˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤.class Counter { private int c = 0; public void increment() { c++; } public void decrement() { c--; } public int value() { return c; }}Thread interferenceëŠ” ë‘ operationì´ ê°™ì€ dataë¥¼ ê°€ì§€ê³  ê°ê° ë‹¤ë¥¸ ì“°ë ˆë“œì—ì„œ ì‹¤í–‰ë  ë•Œ ì¼ì–´ë‚œë‹¤. ì•„ë˜ ì˜ˆì—ì„œ c++; í˜¹ì€ câ€“;ê°€ ê°„ë‹¨í•œ í•˜ë‚˜ì˜ expressionìœ¼ë¡œ ë³´ì¼ ìˆ˜ ìˆì§€ë§Œ JVMì—ì„œëŠ” ì´ ê°„ë‹¨í•œ expressionë„ ì—¬ëŸ¬ ê³¼ì •ìœ¼ë¡œ translate ë  ìˆ˜ ìˆë‹¤. c++ë¥¼ ì˜ˆë¡œ ë“¤ë©´ ë‹¤ìŒê³¼ ê°™ì€ ê³¼ì •ìœ¼ë¡œ ë‚˜ë‰˜ì–´ì§ˆ ìˆ˜ ìˆë‹¤. í˜„ì¬ c ì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤ ë¶ˆëŸ¬ì˜¨ ê°’ì— 1ì„ ë”í•œë‹¤ ë”í•´ì§„ ê°’ì„ cì— ë‹¤ì‹œ ì €ì¥í•œë‹¤.câ€“ë„ ë‘ë²ˆì§¸ ê³¼ì •ì—ì„œ ê°’ì„ ë”í•˜ëŠ” ê²ƒ ëŒ€ì‹  ë¹¼ëŠ” ê³¼ì •ì„ ë„£ëŠ”ë‹¤ë©´ ë˜‘ê°™ì´ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. ì, ì´ì œ thread interferenceê°€ ì¼ì–´ë‚˜ëŠ” ê³¼ì •ì„ í•œ ë²ˆ ì ì–´ë³´ì. Thread AëŠ” incrementë¥¼ ë¶€ë¥´ê³ , Thread BëŠ” decrementë¥¼ ë¶€ë¥¸ë‹¤ê³  ê°€ì •í•˜ì. Thread A: í˜„ì¬ c ì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤ Thread B: í˜„ì¬ c ì˜ ê°’ì„ ê°€ì ¸ì˜¨ë‹¤ Thread A: ë¶ˆëŸ¬ì˜¨ cì˜ ê°’ì— 1ì„ ë”í•œë‹¤; c = 1 Thread B: ë¶ˆëŸ¬ì˜¨ cì˜ ê°’ì—ì„œ 1ì„ ëº€ë‹¤; c = -1 Thread A: ë”í•´ì§„ ê°’ì„ cì— ì €ì¥í•œë‹¤; c = 1 Thread B: ëº€ ê°’ì„ cì— ì €ì¥í•œë‹¤; c = -1Thread Aì˜ ê°’ì€ Bì— ì˜í•´ overwrite ëœë‹¤. ì´ ì‹œë‚˜ë¦¬ì˜¤ëŠ” ì—¬ëŸ¬ ê°€ì§€ ì¼ì–´ë‚  ìˆ˜ ìˆëŠ” ì‹œë‚˜ë¦¬ì˜¤ë“¤ ì¤‘ í•˜ë‚˜ì¼ ë¿ì´ë‹¤. ìƒí™©ì— ë”°ë¼ì„œ Bì˜ ê°’ì´ Aì˜ ê°’ìœ¼ë¡œ overwrite ë  ìˆ˜ë„ ìˆê³ , í˜¹ì€ ì•„ë¬´ ì—ëŸ¬ê°€ ì—†ì´ ì‹¤í–‰ ë  ìˆ˜ë„ ìˆë‹¤. ì´ì²˜ëŸ¼ ê²°ê³¼ë¥¼ ì˜ˆìƒí•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— thread interferenceì— ì˜í•´ ì¼ì–´ë‚˜ëŠ” ë²„ê·¸ëŠ” ì°¾ê¸°ë„ í˜ë“¤ê³  ê³ ì¹˜ê¸°ë„ í˜ë“¤ë‹¤.â’Š Memory consistency errorsMemory consistency errorsëŠ” í•œ ì“°ë ˆë“œì—ì„œ ì‹¤í–‰ëœ ì½”ë“œê°€ ë‹¤ë¥¸ ëª¨ë“  ì“°ë ˆë“œë“¤ì—ê²Œ ë³´ì—¬ì§€ì§€ ì•Šì„ ë•Œ ì¼ì–´ë‚˜ëŠ” ì—ëŸ¬ì´ë‹¤. ì˜ˆë¥¼ ë“¤ë©´, ì•„ë˜ ì½”ë“œì™€ ê°™ì´ counter variableì„ thread Aê°€ ì™€ thread Bê°€ ++ operatorë¡œ ê°’ì„ 1ì”© ì¦ê°€ì‹œì¼°ì„ ë•Œ ê²°ê³¼ê°’ì´ 00, 01, 10, í˜¹ì€ 11ì´ ë‚˜ì˜¬ ìˆ˜ ìˆë‹¤ëŠ” ëœ»ì´ë‹¤. (ì˜ˆì‹œì¼ë¿!) int counter = 0; // thread A counter++; // thread B counter++; // thread A System.out.print(counter); // thread B System.out.print(counter); // Result could be 00, 01, 10, or 11Memory consistency errorëŠ” ì—„ë°€íˆ ë§í•˜ë©´ Javaê°€ ì•„ë‹ˆê³  CPUì— ì˜í•´ ì¼ì–´ë‚˜ëŠ” ì—ëŸ¬ì´ë‹¤. ì—¬ê¸°ì„œ ìì„¸íˆ ì„¤ëª…í•˜ëŠ” ê²ƒì€ ë¬´ë¦¬ê°€ ìˆê³ , ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê³  ë„˜ì–´ê°€ë„ë¡ í•˜ê² ë‹¤.CPUê°€ ì–´ë–¤ ê°’ì„ ì“°ëŠ”(write) ì‘ì—…ì„ í•  ë•Œì—ëŠ” ë‹¤ë¥¸ ì‘ì—…ë“¤ì€ ì‹¤í–‰ë  ìˆ˜ ì—†ë‹¤. ê·¸ë˜ì„œ ì–´ë–¤ ê°’ì´ ì“°ì—¬ì§ˆ ë•Œì—ëŠ” ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì´ ê·¸ ê°’ì„ ê°€ì ¸ì˜¬ ìˆ˜ ì—†ê¸° ë–„ë¬¸ì— ì“°ë ˆë“œë“¤ì€ ìˆ˜ì‹œë¡œ ê·¸ ê°’ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸ì„ í•´ì•¼ í•œë‹¤. ê°’ì„ ê°€ì ¸ê°ˆ ìˆ˜ ìˆëŠ” ìƒí™©ì´ ë˜ë©´ ê°’ì„ ì½ê²Œ ë˜ëŠ”ë° ì´ ìˆœì„œê°€ ê°’ì´ ì“°ì—¬ì§„ëŒ€ë¡œ(write) í˜¹ì€ í”„ë¡œê·¸ë˜ë¨¸ê°€ ì‹¤í–‰í•œ ìˆœì„œëŒ€ë¡œ ê°€ì ¸ì˜¤ëŠ” ê²Œ ì•„ë‹ˆê¸° ë•Œë¬¸ì— ì´ ê²½ìš°ì— memory consistency errorê°€ ì¼ì–´ë‚  ìˆ˜ ìˆë‹¤.ê°œë°œìì—ê²Œ ì¤‘ìš”í•œ ê²ƒì€ memory consistency errorë¥¼ ì–´ë–»ê²Œ ë°©ì§€í•  ìˆ˜ ìˆëŠ”ê°€ì´ë‹¤. Java documentation ì—ì„œëŠ” happens-before relationshipì„ ë§Œë“¤ë¼ê³  í•˜ëŠ”ë°, ë§ ê·¸ëŒ€ë¡œ ì–´ë–¤ ì‘ì—… ì „ì— ëª¨ë“  ê³¼ì •ì´ ì¼ì–´ë‚˜ê²Œë”í•´ì„œ ê·¸ ê²°ê³¼ê°€ ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì—ê²Œ visible í•˜ê²Œë” ì½”ë“œë¥¼ ì‘ì„±í•˜ë¼ëŠ” ê²ƒì´ë‹¤. ë§ˆì¹˜ ìˆ˜í•™ì‹œê°„ì— ë°°ìš´ í•„ìš”ì¡°ê±´, ì¶©ë¶„ì¡°ê±´ì²˜ëŸ¼ ì–´ë–¤ ë©”ì†Œë“œë‚˜ í´ë˜ìŠ¤ë¥¼ happens-before relationshipì„ ê°€ì§€ê²Œë” ë§Œë“¤ë©´ memory consistency errorë¥¼ ë°©ì§€ í•  ìˆ˜ ìˆë‹¤ëŠ” ë§ì´ë‹¤.ìš°ë¦¬ê°€ ì§€ë‚œ ë‘ í¬ìŠ¤íŒ… ì¤‘ì— ì´ë¯¸ ì´ ê´€ê³„ë¥¼ ì˜ë„í•˜ì§€ ì•Šê³  ì´ ê´€ê³„ë¥¼ ë§Œë“¤ì–´ ì‚¬ìš©í–ˆëŠ”ë°, Thread.start ì™€ Thread.joinì´ ê·¸ê²ƒë“¤ì´ë‹¤. ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í• í…ë° ê·¸ ì „ì— ì™œ ì´ê²ƒë“¤ì´ ê·¸ëŸ° ê´€ê³„ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ”ì§€ í•œ ë²ˆ ìƒê°í•´ë³´ê³  ì½ë„ë¡ í•˜ì. ì–´ë–¤ ì“°ë ˆë“œì—ì„œ Thread.startë¥¼ ì‚¬ìš©í•´ ì“°ë ˆë“œë¥¼ ì‹¤í–‰í–ˆë‹¤ë©´ ê·¸ ì „ì— ìˆëŠ” ì½”ë“œëŠ” ì‹¤í–‰ëœ ì“°ë ˆë“œì—ê²Œ ëª¨ë‘ visibleí•˜ë‹¤ ì„±ê³µì ìœ¼ë¡œ Thread.joinì„ ì‹¤í–‰ë˜ì—ˆë‹¤ë©´ joinëœ ì“°ë ˆë“œ ì•ˆì—ì„œ ì‹¤í–‰ëœ ëª¨ë“  ì½”ë“œëŠ” Thread.joinì„ ì‹¤í–‰í•œ ì“°ë ˆë“œì—ì„œ ëª¨ë‘ visibleí•˜ë‹¤ì´ ì™¸ì—ë„ ë” ì—¬ëŸ¬ê°€ì§€ happens-before relationship ì„ ë§Œë“¤ì–´ ì£¼ëŠ” ì—¬ëŸ¬ ì‹œë‚˜ë¦¬ì˜¤ê°€ ìˆëŠ”ë°, ê¶ê¸ˆí•˜ë‹¤ë©´ Memory Consistency Properties í˜¹ì€ 17.4.5. Happens-before Order ë¥¼ ì°¸ê³ í•´ë³´ì.â’‹ Synchronized methodsìë°”ëŠ” ë‘ ê°€ì§€ ê¸°ë³¸ synchronization ë°©ë²•ì„ ì œê³µí•˜ëŠ”ë°, Â¹synchronized methods ì™€ Â²synchronized statementsì´ë‹¤. ì´ë²ˆ ì„¹ì…˜ì—ì„œëŠ” synchronized methodsì— ëŒ€í•´ ì•Œì•„ë³´ê³  ë‹¤ìŒ ì„¹ì…˜(5.Implicit Locks and Synchronization)ì—ì„œ synchronized statementsì— ëŒ€í•´ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.ë©”ì†Œë“œë¥¼ synchronized ë¡œ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” synchronizedë¼ëŠ” í‚¤ì›Œë“œë¥¼ access modifier ë’¤ì— ë¶™ì—¬ì£¼ë©´ ëœë‹¤.e.g)public class SynchronizedCounter { private int c = 0; public synchronized void increment() { c++; } public synchronized void decrement() { c--; } public synchronized int value() { return c; }}ë©”ì†Œë“œë¥¼ synchronizedë¡œ ë§Œë“¤ì–´ ì£¼ë©´ ê·¸ë ‡ì§€ ì•Šì„ ë•Œì™€ ë¹„êµí•´ ë‘ ê°€ì§€ê°€ ë‹¬ë¼ì§„ë‹¤. ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì´ ë©”ì†Œë“œë¥¼ ë™ì‹œì— ë¶€ë¥¼ ìˆ˜ ì—†ê²Œ ëœë‹¤. í•œ ì“°ë ˆë“œê°€ synchronized methodë¥¼ ë¶€ë¥´ë©´, ê°™ì€ ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•œ ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì€ ì‹¤í–‰ë˜ê³  ìˆëŠ” ì“°ë ˆë“œê°€ ëë‚˜ê¸° ì „ê¹Œì§€ ì‹¤í–‰ì´ ë¯¸ë¤„ì§„ë‹¤. Synchronized methodê°€ ì¡´ì¬í•œë‹¤ë©´ ìë™ì ìœ¼ë¡œ happens-before relationship ì´ í˜•ì„±ëœë‹¤. ê²°ë¡ ì ìœ¼ë¡œ variable cì— ëŒ€í•œ memory consistency errorë¥¼ ë°©ì§€í•  ìˆ˜ ìˆë‹¤.ê²°ê³¼ì ìœ¼ë¡œ Synchronized methodsëŠ” ì•ì„œ ì‚´í´ ë³¸ ë‘ ê°€ì§€ ë¬¸ì œì  ëª¨ë‘ í•´ê²°í•  ìˆ˜ ìˆì§€ë§Œ, Livenessì™€ ê´€ë ¨ëœ ë¬¸ì œì ì„ ì•¼ê¸°í•  ìˆ˜ ìˆëŠ”ë°, ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œ ë‹¤ë£° ì˜ˆì •ì´ë‹¤.â’Œ Intrinsic Locks and Synchronization1) Intrinsic LocksSynchronizationì€ intrinsic lock í˜¹ì€ monitor lockì´ë¼ê³  ë¶ˆë¦¬ëŠ” entityì— ì˜í•´ ì´ë£¨ì–´ì§„ë‹¤. ì¦‰, ì´ lockì´ ì˜¤ë¸Œì íŠ¸ì˜ ìƒíƒœí•œ accessë¥¼ ë§¤ë‹ˆì§•í•˜ê³  happens-before relationshipì„ ë§Œë“œëŠ” ë°ì— ì‚¬ìš©ëœë‹¤.ëª¨ë“  ì˜¤ë¸Œì íŠ¸ëŠ” intrinsic lockì„ ê°€ì§€ê³  ìˆë‹¤. ì–´ë–¤ ì˜¤ë¸Œì íŠ¸ì˜ í•„ë“œì— ëŒ€í•œ ê¶Œí•œ(access)ì„ ì–»ê¸° ìœ„í•´, ì“°ë ˆë“œëŠ” ê·¸ ì˜¤ë¸Œì íŠ¸ì˜ intrinsic lockì„ ë¨¼ì € ì–»ì–´ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  ëª¨ë“  ì‘ì—…ì´ ëë‚˜ë©´ ê·¸ lockì„ releaseí•œë‹¤. ê·¸ë˜ì„œ ìš°ë¦¬ëŠ” ì“°ë ˆë“œê°€ intrinsic lockì„ ì–»ì€ ì‹œì ë¶€í„° releaseí•  ë•Œê¹Œì§€ ê·¸ lockì„ ì†Œìœ í•œë‹¤(own)ë¼ê³  í‘œí˜„í•œë‹¤. í•œ ì“°ë ˆë“œê°€ intrinsic lockì„ ì†Œìœ í•˜ê³  ìˆëŠ” í•œ ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì€ ê°™ì€ lockì„ ì–»ì„ ìˆ˜ ì—†ë‹¤. ì¦‰, ë‹¤ë¥¸ ì“°ë ˆë“œë“¤ì´ ê·¸ lockì„ ì–»ìœ¼ë ¤ê³  í•˜ë©´ ëª¨ë‘ blockëœë‹¤.ê·¸ë ‡ë‹¤ë©´ static synchronized methodê°€ ì‹¤í–‰ë˜ë©´ ì–´ë–¨ê¹Œ? Static methodëŠ” objectê°€ ì•„ë‹Œ classì™€ associated ë˜ì–´ ìˆê¸° ë•Œë¬¸ì—, classì˜ lockì„ ì´ìš©í•˜ê²Œ ëœë‹¤. ì¦‰, static synchronized methodê°€ ì‹¤í–‰ë˜ê³  ìˆë‹¤ë©´ í•´ë‹¹ classì—ëŠ” ë‹¤ë¥¸ ì“°ë ˆë“œê°€ ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤.2) Synchronized StatementsSynchronized ì½”ë“œë¥¼ ë§Œë“œëŠ” ë‹¤ë¥¸ ë°©ë²•ì€ Synchronized statementsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ë‹¤. Synchronized methodsì™€ì˜ ê°€ì¥ í° ì°¨ì´ì ì€ Synchronized statementsì€ ì˜¤ë¸Œì íŠ¸ë¥¼ ë°˜ë“œì‹œ ëª…ì‹œí•´ì¤˜ì•¼ í•˜ëŠ”ë° ì´ê²ƒì´ lockì˜ scopeì´ë‹¤.ì•„ë˜ì˜ ì˜ˆë¥¼ ë³´ì. MsLunch í´ë˜ìŠ¤ëŠ” c1ê³¼ c2ë¼ëŠ” long variablesë¥¼ ê°€ì§€ê³  ìˆê³  ì´ ë‘ variableì€ í•¨ê»˜ ì‚¬ìš© ë˜ì§€ ì•ŠëŠ”ë‹¤ê³  ê°€ì •í•´ë³´ì. ëª¨ë“  í•„ë“œëŠ” synchronized ë˜ì–´ì•¼ í•˜ì§€ë§Œ c1ì„ updateí•  ë•Œ c2ì˜ ê°’ì´ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë§‰ì„ í•„ìš”ëŠ” ì „í˜€ ì—†ë‹¤. ë§Œì•½ ìš°ë¦¬ê°€ synchronized methodë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì“°ë ˆë“œë“¤ì€ í•œ ë²ˆì— í•˜ë‚˜(c1 í˜¹ì€ c2)ì˜ ê°’ë§Œ ì—…ë°ì´íŠ¸ í•  ìˆ˜ ìˆì§€ë§Œ ì•„ë˜ì²˜ëŸ¼ ê°ê° ë‹¤ë¥¸ objectë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨ scopeë¥¼ ì¤„ì—¬ ì„œë¡œì˜ ì—…ë°ì´íŠ¸ê°€ ë°©í•´ë˜ì§€ ì•Šë„ë¡ ë§Œë“¤ ìˆ˜ ìˆë‹¤.public class MsLunch { private long c1 = 0; private long c2 = 0; private Object lock1 = new Object(); private Object lock2 = new Object(); public void inc1() { synchronized(lock1) { c1++; } } public void inc2() { synchronized(lock2) { c2++; } }}3) Reentrant SynchronizationReentrant Synchronizationì€ ì–´ë–¤ í•œ lockì„ ì–»ì€ ì“°ë ˆë“œëŠ” ë°˜ë³µí•´ì„œ ê·¸ lockê³¼ associatedëœ ì˜¤ë¸Œì íŠ¸ë‚˜ ë©”ì†Œë“œì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê²ƒì„ ë§í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´, recursive ë©”ì†Œë“œê°€ synchronized ë˜ì—ˆë‹¤ê³  ê°€ì •í–ˆì„ ë•Œ, í•´ë‹¹ lockì„ ì–»ì€ ì“°ë ˆë“œëŠ” recursive ë©”ì†Œë“œê°€ ëì´ë‚  ë•Œê¹Œì§€ lockì„ ì†Œìœ í•˜ê²Œ ëœë‹¤.â’ Whatâ€™s next?ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” volatile keywordì™€ Liveness, ë©€í‹°ì“°ë ˆë”©ì´ ì‹¤í–‰ë˜ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ìˆœì„œëŒ€ë¡œ ì‹¤í–‰ì‹œí‚¬ìˆ˜ ìˆëŠ” ë°©ë²•,ì— ëŒ€í•´ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.â’ ReferencesSynchronization - OracleJava Synchronized Blocks - Jenkov.comSynchronized Block in Java - Javatpoint.com" }, { "title": "Java's Concurrency - 2 (Thread management)", "url": "/posts/java-concurrency-2-thread-management/", "categories": "Programming, Java", "tags": "Java, Thread", "date": "2022-07-22 22:27:00 -0700", "snippet": "â’ˆ Backgroundì˜¤ëŠ˜ì€ ì§€ë‚œ ê¸€ì— ì´ì–´ í˜„ì¬ ë™ì‘í•˜ê³  ìˆëŠ” threadë¥¼ control í•  ìˆ˜ ìˆëŠ” ì„¸ ê°€ì§€ ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ë ¤ê³  í•œë‹¤. Sleep Interrupts Joinsí•˜ë‚˜ì”© ì•Œì•„ë³¸ í›„ì— ì„¸ ê°€ì§€ ë°©ë²•ì´ ëª¨ë‘ í¬í•¨ëœ exampleì„ í†µí•´ ì–´ë–»ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ì•Œì•„ë³´ì.â’‰ SleepThread.sleepì€ ì¼ì • ì‹œê°„ë™ì•ˆ í˜„ì¬ ì‹¤í–‰ ë˜ê³  ìˆëŠ” ì‘ì—…ì„ ë¯¸ë£¨ëŠ” ì—­í• ì„ í•œë‹¤. ë©ˆì¶˜ ì‘ì—…ì´ ì‹¤í–‰ë˜ê³  ìˆë˜ í”„ë¡œì„¸ì„œë¥¼ ë‹¤ë¥¸ ì“°ë ˆë“œë‚˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ ì´ìš©í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ ìœ ìš©í•˜ë‹¤.sleep ë©”ì†Œë“œëŠ” ë‘ ê°€ì§€ê°€ ì¡´ì¬ í•˜ëŠ”ë° Â¹ millisecondë§Œ ë„£ê±°ë‚˜, Â² millisecondì™€ nanosecondë¥¼ í•¨ê»˜ ë„£ì„ ìˆ˜ ìˆë‹¤. í›„ìì˜ ê²½ìš° ì œê³µëœ millisecond + nanosecondë¡œ ì“°ë ˆë“œë¥¼ ë©ˆì¶œ ì‹œê°„ì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.sleep ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•  ë•Œ ê°€ì¥ ì¡°ì‹¬í•´ì•¼ í•  ì ì€ ìš°ë¦¬ê°€ ì§€ì •í•œ ì‹œê°„ë§Œí¼ ì •í™•íˆ ì“°ë ˆë“œë¥¼ ë©ˆì¶˜ë‹¤ëŠ” ë³´ì¥ì„ í•˜ì§€ ëª» í•œë‹¤ëŠ” ì ì´ë‹¤. ê·¸ ì´ìœ ëŠ” ìš°ë¦¬ê°€ ì§€ì •í•œ ì‹œê°„ì´ OSì˜ timerì™€ schedulerì— ì˜ì¡´í•˜ê¸° ë•Œë¬¸ì´ë‹¤. ê°„ë‹¨í•˜ê²Œ ë§í•˜ë©´, í˜„ì¬ ì‹œìŠ¤í…œì´ ë°”ìœ ìƒíƒœë¼ë©´ ì“°ë ˆë“œëŠ” waiting ìƒíƒœ(ì•„ë˜ Thread life cycle ì°¸ê³ )ì—ì„œ ìš°ë¦¬ê°€ ì§€ì •í•œ ì‹œê°„ë³´ë‹¤ ë” ì˜¤ë˜ ìˆì„ ìˆ˜ ìˆê³ , ë°˜ëŒ€ì˜ ê²½ìš°ì—ëŠ” ìš°ë¦¬ê°€ ì§€ì •í•œ ì‹œê°„ë§Œí¼ ë³´ë‹¤ ì •í™•í•˜ê²Œ ìˆì„ ê²ƒì´ë‹¤. ê²°ë¡ ì ìœ¼ë¡œ, sleep ë©”ì†Œë“œëŠ” ì–¸ì œë“  ìš°ë¦¬ê°€ ì§€ì •í•œ ì‹œê°„ë§Œí¼ 100% ì •í™•í•˜ê²Œ ë™ì‘í•˜ì§€ ì•ŠëŠ”ë‹¤ëŠ” ê±¸ ê¸°ì–µí•´ë‘ì.Thread life cycle (https://commons.wikimedia.org/)ë˜í•œ, sleep period ëŠ” ì•„ë˜ì—ì„œ ì•Œì•„ ë³¼ interruptsì— ì˜í•´ ì¢…ë£Œë  ìˆ˜ ìˆë‹¤. ì“°ë ˆë“œê°€ sleepì— ì˜í•´ waiting ìƒíƒœì¼ ë•Œ ë‹¤ë¥¸ ì“°ë ˆë“œì— ì˜í•´ ë°©í•´(interrupt) ë°›ìœ¼ë©´ InterruptedExceptionì„ ë˜ì§„ë‹¤.â’Š InterruptsInterruptëŠ” ì“°ë ˆë“œì—ê²Œ ë©ˆì¶”ê³ , ë‹¤ë¥¸ ì¼ì„ í•´ì•¼í•œë‹¤ëŠ” ì¼ì¢…ì˜ ì‹ í˜¸ì´ë‹¤. Interruptì— ì–´ë–»ê²Œ response í•  ê²ƒ ì¸ì§€ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ëŠ” ê°œë°œìì˜ ë§ˆìŒì´ë‹¤. í•´ë‹¹ ì“°ë ˆë“œë¥¼ ì¢…ë£Œí•˜ëŠ” ê²ƒì´ ë³´í†µì´ê³ , ìœ„ì—ì„œ ì•Œì•„ë³¸ Thread.sleepì´ë‚˜ Thread.join() ë“± ì—¬ëŸ¬ê°€ì§€ ë©”ì†Œë“œë“¤ì€ InterruptedExceptionì„ ë˜ì§„ë‹¤.ê° ì“°ë ˆë“œëŠ” ê°ìì˜ interrupt statusë¥¼ ì•Œë ¤ì£¼ëŠ” flagë¥¼ ê°€ì§€ê³  ìˆê³ , ì´ flagëŠ” true í˜¹ì€ falseë¡œ ì„¤ì •ë  ìˆ˜ ìˆë‹¤. ê¸°ë³¸ê°’ì€ falseì´ê³  í•´ë‹¹ ì“°ë ˆë“œê°€ interrupted ë˜ë©´ trueë¡œ ì„¤ì •ëœë‹¤.Interrupted ë  ì“°ë ˆë“œê°€ ìˆë‹¤ë©´ interruptionì„ í•¸ë“¤ë§ í•  ì½”ë“œë¥¼ ë°˜ë“œì‹œ ì‘ì„±í•´ì•¼ í•œë‹¤.Interrupt flag ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë‘ ê°€ì§€ ë©”ì†Œë“œê°€ ìˆëŠ”ë°, Â¹interrupted ê³¼ Â²isInterrupted ì´ë‹¤. ë‘ ë©”ì†Œë“œì—ëŠ” ë‘ ê°€ì§€ í° ì°¨ì´ì ì´ ìˆëŠ”ë°,â‘´ interruptedëŠ” Thread ì˜¤ë¸Œì íŠ¸ì˜ static methodì´ê³  isInterruptedëŠ” instance methodì´ë‹¤. â‘µ interruptedëŠ” ì‹¤í–‰ëœ í›„ interrupt status flagë¥¼ clear í•˜ì§€ë§Œ isInterruptedëŠ” flagë¥¼ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤. Â  Interrupted isInterrupted Scope Static method Instance method Clear flag True False isInterruptedëŠ” ë³´í†µ loggingì´ë‚˜ debugging í•  ë•Œ ì“°ì´ê³ , ëŒ€ê°œëŠ” interruptedë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ëœë‹¤. ì´ìœ ëŠ” isInterruptedëŠ” ë‹¹ì‹œì˜ flag snapshotì„ ì£¼ëŠ” ê²ƒì´ê¸° ë•Œë¬¸ì— ë‹¤ì‹œ ì‹¤í–‰í–ˆì„ ë•Œ ì´ë¯¸ outdatedëœ statusë¥¼ ì¤„ ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. ë˜í•œ interruptedë¥¼ í†µí•´ interrupt status flagê°€ clear ëë‹¤ëŠ” ê²ƒì€ ê°œë°œìê°€ ê·¸ì— ëŒ€ì‘í•˜ëŠ” ì•¡ì…˜ì„ ì·¨í–ˆë‹¤ëŠ” ì˜ë¯¸ì´ê¸° ë•Œë¬¸ì´ë‹¤.â’‹ Joinsjoin ë©”ì†Œë“œëŠ” í˜„ì¬ ì“°ë ˆë“œì—ì„œ join ë©”ì†Œë“œê°€ ë¶ˆë ¤ì§„ ì“°ë ˆë“œê°€ í˜„ì¬ í•˜ëŠ” ì¼ì„ ì™„ë£Œí•  ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ì¤„ ìˆ˜ ìˆë„ë¡ í•œë‹¤. joinì€ sleepê³¼ ë¹„ìŠ·í•œ ì ì´ ë§ë‹¤. ê¸°ë‹¤ë ¤ì¤„ ì‹œê°„ì„ ì§€ì •í•  ìˆ˜ë„ ìˆê³  í˜¹ì€ ì•„ë¬´ argument ì—†ì´ ì“°ë ˆë“œê°€ ì™„ë£Œë  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ ìˆ˜ë„ ìˆë‹¤. ì—­ì‹œ ìš°ë¦¬ê°€ ì§€ì •í•œ ì‹œê°„ì„ 100% ì •í™•í•˜ê²Œ ë³´ì¥ ë°›ì„ ìˆ˜ ì—†ë‹¤ëŠ” ê²ƒì„ ìœ ì˜í•˜ì. ë˜í•œ interruptì— InterruptedExceptionìœ¼ë¡œ ëŒ€ì‘í•˜ëŠ” ì ë„ ê°™ë‹¤.â’Œ Examplesleep, interruptê³¼ joinì„ ëª¨ë‘ ì´ìš©í•œ exampleì„ í†µí•´ì„œ ì •ë¦¬í•´ë³´ë„ë¡ í•˜ì. Commentë¥¼ ë”°ë¼ì„œ ì°¨ê·¼ì°¨ê·¼ ì½”ë“œë¥¼ ì½ì–´ë³´ê³  ì½”ë“œ ë¸”ëŸ­ ë°‘ ì •ë¦¬ëœ ê¸€ì„ ì½ì–´ë³´ì.public class SimpleThreads { static void threadMessage(String message) { // ì“°ë ˆë“œ ì •ë³´ì™€ ë©”ì„¸ì§€ë¥¼ í‘œí˜„í•´ ì¤„ helper method String threadName = Thread.currentThread().getName(); System.out.format(\"%s: %s%n\", threadName, message); } private static class MessageLoop implements Runnable { // ì‹¤ì œ ì‹¤í–‰ë  thread public void run() { String importantInfo[] = { \"Mares eat oats\", \"Does eat oats\", \"Little lambs eat ivy\", \"A kid will eat ivy too\"}; try { // 4ì´ˆ í…€ì„ ë‘ê³  Stringì„ í”„ë¦°íŠ¸ í•œë‹¤ for (int i = 0; i &lt; importantInfo.length; i++) { Thread.sleep(4000); // 4ì´ˆë¥¼ ê¸°ë‹¤ë¦°ë‹¤ threadMessage(importantInfo[i]); // Stringì„ í•˜ë‚˜ì”© ì¶œë ¥ í•œë‹¤ } } catch (InterruptedException e) { // ì´ ì“°ë ˆë“œê°€ interrupted ë˜ì–´ sleep ë©”ì†Œë“œê°€ InterruptedExceptionì„ ë˜ì§€ë©´ threadMessage(\"I wasn't done!\"); // ë©”ì„¸ì§€ ì¶œë ¥ } } } public static void main(String args[]) throws InterruptedException { long patienceInMS = 1000 * 60 * 60; // MessageLoop ì“°ë ˆë“œë¥¼ interruptí•˜ê¸° ì „ ê¸°ë‹¤ë¦´ ì‹œê°„, ê¸°ë³¸ê°’: 1ì‹œê°„ if (args.length &gt; 0) { // ì»¤ë§¨ë“œ ë¼ì¸ì„ í†µí•´ ì‹œê°„ì„ ì§€ì •í•´ì£¼ë©´, patienceInMS ê°’ì„ ë³€ê²½í•œë‹¤ try { patienceInMS = Long.parseLong(args[0]) * 1000; } catch (NumberFormatException e) { System.err.println(\"Argument must be an integer.\"); System.exit(1); } } threadMessage(\"Starting MessageLoop thread\"); long startTime = System.currentTimeInMS(); // í˜„ì¬ ì‹œê°„ Thread t = new Thread(new MessageLoop()); // ì“°ë ˆë“œ instantiation t.start(); // ì“°ë ˆë“œ ì‹¤í–‰ threadMessage(\"Waiting for MessageLoop thread to finish\"); while (t.isAlive()) { // MessageLoop ì“°ë ˆë“œê°€ ì‚´ì•„ìˆëŠ” ë™ì•ˆ threadMessage(\"Still waiting...\"); t.join(1000); // MessageLoop ì“°ë ˆë“œê°€ ëë‚˜ê¸°ë¥¼ 1ì´ˆê°„ ê¸°ë‹¤ë¦°ë‹¤ // ë§Œì•½ patienceInMS ë³´ë‹¤ ê¸´ ì‹œê°„ë™ì•ˆ ì‹¤í–‰ë˜ì—ˆëŠ”ë°ë„ ì•„ì§ MessageLoopê°€ ì¢…ë£Œë˜ì§€ ì•Šì•˜ë‹¤ë©´ if (((System.currentTimeInMS() - startTime) &gt; patienceInMS) &amp;&amp; t.isAlive()) { threadMessage(\"Tired of waiting!\"); t.interrupt(); // MessageLoopë¥¼ interrupt í•œë‹¤ } } threadMessage(\"Finally!\"); }}Commentì— ì¨ ë†“ì€ ëŒ€ë¡œ ë§Œì•½ ì£¼ì–´ì§„ patienceInMSë³´ë‹¤ ê¸´ ì‹œê°„ë™ì•ˆ MessageLoopê°€ ì‹¤í–‰ë˜ê³  ìˆë‹¤ë©´, interruptë¥¼ í†µí•´ MessageLoopê°€ ì‹¤í–‰ë˜ê³  ìˆëŠ” threadê°€ InterruptedExceptionì„ ë˜ì ¸ì„œ I wasn't done! ì´ë¼ëŠ” ë©”ì„¸ì§€ì™€ í•¨ê»˜ threadë¥¼ ì¢…ë£Œì‹œí‚¨ë‹¤. threadê°€ ì¢…ë£Œë˜ë©´ t.isAlive()ê°€ falseê°€ ë˜ê³  Finally! ê°€ ì¶œë ¥ë˜ë©° í”„ë¡œê·¸ë¨ì´ ì¢…ë£Œëœë‹¤.â’ ReferenceOracle: ConcurrencyJava: Difference in usage between Thread.interrupted() and Thread.isInterrupted()?" }, { "title": "Java's Concurrency - 1 (Basic)", "url": "/posts/java-concurrency-1-basic/", "categories": "Programming, Java", "tags": "Java, Thread", "date": "2022-07-08 19:51:00 -0700", "snippet": "â’ˆ Backgroundë¸”ë¡œê·¸ ìŠ¤í„°ë””ì› ì¤‘ í•œ ë¶„ì´ Javaë¡œ ê°œë°œí•  ë•Œ Threadë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì£¼ì§€ ì•Šìœ¼ë©´ ê·¸ê±´ Single-Threaded applicationì¸ê°€ ë¼ëŠ” ì§ˆë¬¸ì„ ì£¼ì…”ì„œ ê°„ë‹¨í•˜ê²Œ ë‹µí•´ë³´ê³ , ê°œë°œìê°€ ì–´ë–»ê²Œ Threadë¥¼ ìƒì„±í•  ìˆ˜ ìˆëŠ”ì§€ ê°„ë‹¨í•˜ê²Œ ì•Œì•„ë³´ë ¤ê³  í•œë‹¤.â’‰ Is Java Single-Threaded application without explicitly created threads?JVMì´ ì‹¤í–‰ë  ë•Œ, ë³´í†µì€ ì˜¤ì§ í•˜ë‚˜ì˜ Non-Daemon Thread(í˜¹ì€ User Thread)ê°€ ì¡´ì¬í•˜ê²Œ ëœë‹¤. ìš°ë¦¬ê°€ ë§¤ì¼ ê°™ì´ ì“°ê³  ìˆëŠ” main methodê°€ ì‹¤í–‰ë˜ëŠ” main threadì´ë‹¤. Daemon ThreadëŠ” JVMì— ì˜í•´ì„œ backgroundì—ì„œ ì‹¤í–‰ë˜ê³  garbage collectionë‚˜ finalizerê°™ì€ ì—¬ëŸ¬ê°€ì§€ taskë¥¼ ìˆ˜í–‰í•œë‹¤. ëª¨ë“  Non-Daemon Threadê°€ ì™„ë£Œë˜ë©´ í”„ë¡œê·¸ë¨ì€ ëì´ ë‚˜ì§€ë§Œ, Daemon Threadì˜ ì™„ë£ŒëŠ” í”„ë¡œê·¸ë¨ì˜ ì¢…ë£Œë¥¼ ì˜ë¯¸ í•˜ì§€ ì•ŠëŠ”ë‹¤.ê·¸ë ‡ë‹¤ë©´ Javaì—ì„œ Threadë¥¼ explicití•˜ê²Œ ë§Œë“¤ì–´ì£¼ì§€ ì•Šìœ¼ë©´ single-threaded applicationì¼ê¹Œ?ë‹µì€ Daemon Threadë¥¼ í¬í•¨í•´ì„œ ë‹µì„ í•˜ëŠ”ì§€ì— ë”°ë¼ ë§ë‹¤ ì¼ ìˆ˜ë„, ì•„ë‹ˆë‹¤ ì¼ ìˆ˜ë„ ìˆë‹¤.ì˜ˆë¥¼ ë“¤ì–´, ì•„ë˜ ì½”ë“œì²˜ëŸ¼ Main method ì•ˆì— ê°„ë‹¨í•œ ì½”ë“œë§Œ ê°€ì§€ê³  ìˆì„ ë•Œ(Threadë¥¼ ë”°ë¡œ ìƒì„±í•˜ì§€ ì•Šì•˜ì„ ë•Œ!) ê°œë°œìì˜ ì…ì¥ì—ì„œëŠ” single-threaded applicationì´ì§€ë§Œ ì‹¤ì œë¡œëŠ” Non-Daemon Threadë“¤ì´ ì‹¤í–‰ ë˜ê³  ìˆê¸° ë•Œë¬¸ì´ë‹¤. public static void main(String[] args) { System.out.println(\"Hello World!\"); }ì°¸ê³ ë¡œ Daemon ThreadëŠ” IDEì˜ ë””ë²„ê±°ë¥¼ í†µí•´ ì‰½ê²Œ ë³¼ ìˆ˜ ìˆë‹¤.Daemon Threads: Finalizer, Reference Handler, Single Dispatcherê°€ Daemon Threadì—ì„œ ì‹¤í–‰ë˜ê³  ìˆë‹¤â’Š How to create a thread in JavaJavaì—ì„œ threadëŠ” Thread í´ë˜ìŠ¤ì— ì˜í•´ ìƒì„±ë˜ëŠ”ë°, ì´ í´ë˜ìŠ¤ë¥¼ instantiateí•˜ëŠ” ë‘ ê°€ì§€ ë°©ë²•ì´ ìˆë‹¤. Extending Thread class (documentation) Implementing Runnable interface (documentation)ë‘˜ ì¤‘ì— ì–´ë–¤ ë°©ë²•ì„ ì¨ì•¼ í• ê¹Œ? ì‹¤ì œë¡œëŠ” Runnable interfaceë¥¼ ë§ì´ ì“°ê²Œ ëœë‹¤. Thread classë¥¼ extend í•˜ê²Œ ë˜ë©´ ë‹¤ë¥¸ í´ë˜ìŠ¤ë¥¼ ë” ì´ìƒ extend í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— Runnable interfaceë¥¼ implementí•˜ëŠ” ìª½ì´ ì¡°ê¸ˆ ë” ìœ ì—°í•œ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ìˆ˜ ìˆê¸° ë–„ë¬¸ì´ë‹¤.â’‹ Thread classThread classë¥¼ ì´ìš©í•´ threadë¥¼ ìƒì„±í•  ë•Œì—ëŠ” Thread classë¥¼ extendí•œ í›„ run methodì•ˆì— ì‹¤í–‰ ë  ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ Parent threadì—ì„œ ì‘ì„±í•œ í´ë˜ìŠ¤ë¥¼ instantiation í›„ start methodë¥¼ ì´ìš©í•´ threadë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤ Note: Threadë¥¼ ì‹¤í–‰í•  ë•Œ, runì´ ì•„ë‹Œ start methodë¥¼ í˜¸ì¶œí•œë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ë°‘(â’ run() vs start())ì—ì„œ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.class PrimeThread extends Thread { // 1. Extend Thread class long minPrime; PrimeThread(long minPrime) { this.minPrime = minPrime; } public void run() { // 2. Write codes to be ran on this thread . . . }}class Main { public static void main(String[] args) { PrimeThread pt = new PrimeThread(143); // 3. Instantiate the class extends Thread pt.start(); // 4. Run the thread }}â’Œ Runnable InterfaceRunnable interfaceë¥¼ ì´ìš©í•´ threadë¥¼ ìƒì„±í•  ë•Œì—ëŠ” Runnable interfaceë¥¼ implementí•œ í›„ run methodì•ˆì— ì‹¤í–‰ ë  ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ Parent threadì—ì„œ ì‘ì„±í•œ í´ë˜ìŠ¤ë¥¼ instantiation í›„ Instantiateí•œ í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œìš´ Thread objectë¥¼ ì´ìš©í•´ implement í•´ì¤€ë‹¤ ìƒˆë¡œ ë§Œë“¤ì–´ì§„ Thread objectë¥¼ start methodë¡œ ë¶ˆëŸ¬ì¤€ë‹¤ Note: Runnable interfaceëŠ” ì˜¤ì§ run method í•˜ë‚˜ë§Œì„ ê°€ì§„ interfaceì´ê³  Thread objectë¥¼ í†µí•´ ë§Œë“¤ì–´ì§ˆ ìƒˆë¡œìš´ threadì—ì„œ ì‹¤í–‰ë  ì½”ë“œë¥¼ ë‹´ëŠ” ì—­í• ë§Œì„ í•œë‹¤class PrimeRun implements Runnable { // 1. Runnable interfaceë¥¼ implementí•œ í›„ long minPrime; PrimeRun(long minPrime) { this.minPrime = minPrime; } @Override public void run() { // 2. run methodì•ˆì— ì‹¤í–‰ ë  ì½”ë“œë¥¼ ì‘ì„±í•œë‹¤ . . . }}class Main { public static void main(String[] args) { PrimeRun p = new PrimeRun(143); // 3. Parent threadì—ì„œ ì‘ì„±í•œ í´ë˜ìŠ¤ë¥¼ instantiation í›„ new Thread(p).start(); // 4. Instantiateí•œ í´ë˜ìŠ¤ë¥¼ ìƒˆë¡œìš´ Thread objectë¥¼ ì´ìš©í•´ implement í•´ì¤€ë‹¤ // 5. ìƒˆë¡œ ë§Œë“¤ì–´ì§„ Thread objectë¥¼ start methodë¡œ ë¶ˆëŸ¬ì¤€ë‹¤ }}â’ run() vs start()ìœ„ ì½”ë“œë“¤ì—ì„œ ë´¤ë“¯ì´ threadë¥¼ ì‹¤í–‰ì‹œí‚¬ ë•Œ, ìš°ë¦¬ëŠ” run ëŒ€ì‹  start methodë¥¼ ì´ìš©í•œë‹¤. ê·¸ ì´ìœ ëŠ” ê°„ë‹¨í•œë°, JVMì´ start methodê°€ ë¶ˆë ¤ì§ˆ ë•Œ ìƒˆë¡œìš´ threadë¥¼ ë§Œë“¤ê¸° ë•Œë¬¸ì´ë‹¤. run methodëŠ” threadì—ì„œ ì‹¤í–‰ë  ì½”ë“œì— ë¶ˆê³¼í•˜ë‹¤. ì‹¤ì œ ì½”ë“œë¥¼ í†µí•´ ê°„ë‹¨í•˜ê²Œ ì¦ëª…í•´ ë³´ë„ë¡ í•˜ì.ë¨¼ì € Java documentationì— ì í˜€ ìˆëŠ” ë‚´ìš©ì„ í•œ ë²ˆ ë³´ê³  ê°€ì. It is never legal to start a thread more than once. In particular, a thread may not be restarted once it has completed executionâ€ƒâ€ƒThrows: IllegalThreadStateException - if the thread was already started.ìë°”ì˜ threadëŠ” í•œë²ˆ ì‹¤í–‰ ë˜ê³  ë‚˜ë©´ ë‹¤ì‹œ ì‹¤í–‰ ë  ìˆ˜ ì—†ê³  ë§Œì•½ ë‹¤ì‹œ ì‹¤í–‰ì„ ì‹œë„í•˜ë©´ exceptionì„ ë˜ì§„ë‹¤ê³  í•œë‹¤.ë‹¤ìŒ ì½”ë“œì—ëŠ” Thread classë¥¼ extendí•œ PlaygroundChild classê°€ ìˆê³  ê·¸ ê±¸ ë¶ˆëŸ¬ë‚´ëŠ” Playground classê°€ ì¡´ì¬í•œë‹¤. ê·¸ ì•ˆì—ì„œ run methodì™€ start methodë¥¼ ë‘ ë²ˆì”© ì‹¤í–‰ ì‹œì¼œ ë³´ì•˜ë‹¤. ë§Œì•½ run methodê°€ threadë¥¼ ë§Œë“ ë‹¤ë©´ ë‘ ë²ˆì§¸ ë¶ˆë ¤ì§€ëŠ” run methodëŠ” IllegalThreadStateExceptionì„ ë˜ì ¸ì•¼ í•œë‹¤.ê²°ê³¼ëŠ” ì–´ë–¨ê¹Œ?public class PlaygroundChild extends Thread { public void run() { // compute primes larger than minPrime for(int i = 0; i &lt; 3; ++i) System.out.print(i + \" \"); System.out.println(); }}public class Playground { public static void main(String[] args) { PlaygroundChild pc = new PlaygroundChild(); pc.run(); // 0 1 2 pc.run(); // 0 1 2 pc.start(); // 0 1 2 pc.start(); /* Exception in thread \"main\" java.lang.IllegalThreadStateException\t at java.base/java.lang.Thread.start(Thread.java:794)\t at playground.Playground.main(Playground.java:10) */ }}ê²°ë¡ ì ìœ¼ë¡œ, run methodë¥¼ í˜¸ì¶œí•˜ë©´ threadê°€ ë§Œë“¤ì–´ì§€ì§€ ì•Šê³  run methodìì²´ê°€ ë¶ˆë ¤ì§€ê³ , start methodë¥¼ í†µí•´ì„œë§Œ ìƒˆë¡œìš´ threadë¥¼ ë§Œë“¤ì–´ë‚¼ ìˆ˜ ìˆë‹¤.â’ RetrospectiveThreadë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ë‹¤ì‹œ review í•˜ê³  Daemon Threadì— ëŒ€í•´ì„œ ì•Œì•„ë³¼ ìˆ˜ ìˆëŠ” ì¢‹ì€ ê¸°íšŒê°€ ë˜ì—ˆë‹¤. ì´ ê¸€ì— ì´ì–´ì„œ Javaì˜ Concurrencyì— ëŒ€í•´ì„œ ì¡°ê¸ˆ ë” ìì„¸í•˜ê²Œ ê³µë¶€í•˜ê³  ì´ì–´ì„œ ê¸€ì„ ì¨ ë´ì•¼ ê² ë‹¤. ì–‘ì´ ì›Œë‚™ ë°©ëŒ€í•´ì„œ í•œ ê¸€ì— ë‹´ì„ ìˆ˜ê°€ ì—†ì„ ê²ƒ ê°™ì•„ì„œ ì‹œë¦¬ì¦ˆë¡œ ê¸€ì„ ì¨ì•¼ í•  ê²ƒ ê°™ë‹¤ ğŸ˜â’ ReferencesThread - OracleRunnable - Oracle" }, { "title": "How does JVM work", "url": "/posts/how-does-jvm-work/", "categories": "Programming, Java", "tags": "Java, JVM, Architecture", "date": "2022-06-24 23:26:00 -0700", "snippet": "ì´ ê¸€ì„ ë¨¼ì € ì½ê³  ì˜¤ëŠ” ê±¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤: JVM, JRE and JDKâ’ˆ What is Java Virtual Machine(JVM)Java Virtual Machine(JVM)ì˜ ì£¼ëœ ëª©ì ì€ Java ì»´íŒŒì¼ëŸ¬ë¥¼ í†µí•´ ë³€í™˜ëœ Byte code(.class íŒŒì¼)ë¥¼ Machine codeë¡œ ë³€í™˜í•´ì£¼ëŠ” ê²ƒì´ë‹¤. ì´ ê¸€ì—ì„œëŠ” JVMì˜ ì•„í‚¤í…ì³ë¥¼ í•¨ê»˜ ë³´ë©´ì„œ ì–´ë–»ê²Œ ë³€í™˜ ê³¼ì •ì´ ì´ë£¨ì–´ì§€ëŠ” ì§€ ì•Œì•„ë³¼ ê²ƒì´ë‹¤.JVMì˜ ì•„í‚¤í…ì³ëŠ” ì•„ë˜ ê·¸ë¦¼ê³¼ ê°™ê³ , ì„¸ ê°€ì§€ í° ìš”ì†Œë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤. Class Loader Subsystem Runtime Data Area Execution EngineJVM Architecture simple version(careerbless.com)3ê°€ì§€ ìš”ì†Œë¥¼ í•˜ë‚˜ì”© ìì„¸íˆ ì•Œì•„ë³´ë©° ì–´ë–¤ sub componentsë“¤ë¡œ êµ¬ì„±ì´ ë˜ì–´ ìˆê³  ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ” ì§€ ì•Œì•„ë³´ì.â’‰ JVMâ€™s 3 componentsï¼’-â’ˆ Class Loader SubsystemClass Loader Subsystem ì•ˆì—ì„œ ì„¸ ê°€ì§€ ì‘ì—…ì´ í”„ë¡œì„¸ì‹± ë˜ëŠ”ë°, Loading, Linking ê·¸ë¦¬ê³  Initializationì´ë‹¤.1) Loading: ì‘ì„±í•œ ì½”ë“œ ë‚´ì— ì •ì˜ëœ í´ë˜ìŠ¤ë“¤ì´ ë¶ˆë ¤ì§„ë‹¤2) Linking: Verify, Prepareì™€ Resolve ë¼ëŠ” sub-processingì´ ì´ë£¨ì–´ì§„ë‹¤ Verify: JVMì•ˆì˜ Byte Code Verifierê°€ í´ë˜ìŠ¤ íŒŒì¼ë“¤ì´ ì œëŒ€ë¡œ í¬ë§·íŒ… ë˜ì–´ ìˆëŠ”ì§€, êµ¬ì¡°ì ìœ¼ë¡œ ì •í™•í•œì§€, Validí•œ ì»´íŒŒì¼ëŸ¬ì— ì˜í•´ì„œ ì»´íŒŒì¼ ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ë§Œì•½ invalid í•˜ë‹¤ê³  íŒë‹¨ì´ ë˜ë©´ java.lang.VerifyErrorë¥¼ ë˜ì§„ë‹¤ Prepare: static variablesì„ ìœ„í•œ ë©”ëª¨ë¦¬ë¥¼ í• ë‹¹í•˜ê³  íƒ€ì…ì— ë”°ë¼ default valueë¡œ initializeí•œë‹¤ Resolve: symbolic ë©”ëª¨ë¦¬ ë ˆí¼ëŸ°ìŠ¤ë“¤ì´ ì›ë˜ì˜ ë ˆí¼ëŸ°ìŠ¤ë¡œ ë³€í™˜ëœë‹¤. 3) Initialization: linking process(Prepare, specifically)ì—ì„œ initializeëœ static variablesì— í• ë‹¹ëœ ê°’ì„ ì œê³µí•˜ê³ , static blockë“¤ì´ ì‹¤í–‰ëœë‹¤.ï¼’-â’‰ Runtime Data AreasRuntime Data Areasì—ëŠ” ì´ 5ê°€ì§€ ìš”ì†Œê°€ ì¡´ì¬í•œë‹¤.1) Method Area: Static variablesë¥¼ í¬í•¨í•œ ëª¨ë“  í´ë˜ìŠ¤ ë ˆë²¨ ë°ì´í„°ê°€ ì´ ê³³ì— ì €ì¥ëœë‹¤. JVMì•ˆì— ì˜¤ì§ í•œ Method Areaë§Œ ì¡´ì¬ í•˜ê¸° ë•Œë¬¸ì— ëª¨ë“  resourcesëŠ” shareëœë‹¤.2) Heap Area: ëª¨ë“  Objects, instance variablesì™€ arraysê°€ ì´ ê³³ì— ì €ì¥ëœë‹¤. ì—­ì‹œ JVMì•ˆì— ì˜¤ì§ í•œ Heap Areaë§Œ ì¡´ì¬ í•˜ë¯€ë¡œ ëª¨ë“  resourcesëŠ” shareëœë‹¤. Method Areaì™€ Heap AreaëŠ” ì—¬ëŸ¬ threadsë“¤ì— ì˜í•´ shareë˜ëŠ” ë©”ëª¨ë¦¬ê¸° ë•Œë¬¸ì— thread-safeí•˜ì§€ ì•Šë‹¤3) Stack Area: í•œ thread ë‹¹ í•˜ë‚˜ì˜ stack areaê°€ ë§Œë“¤ì–´ì§„ë‹¤. ê·¸ thread ì•ˆì—ì„œ ë¶ˆë ¤ì§€ëŠ” methodë“¤ í•˜ë‚˜ë‹¹ í•˜ë‚˜ì˜ stackì´ ìŒ“ì—¬ memoryì— ìŒ“ì´ê³  ìš°ë¦¬ëŠ” stack frameì´ë¼ê³  ë¶€ë¥¸ë‹¤. ëª¨ë“  local variablesê°€ ì €ì¥ ë˜ê³ , ë‹¹ì—°íˆ shareë˜ì§€ ì•ŠëŠ” resourceì´ê¸° ë•Œë¬¸ì— thread-safeí•˜ë‹¤. Stack frameì€ ë‹¤ì‹œ ì„¸ ê°€ì§€ ì‘ì€ ìš”ì†Œë“¤ë¡œ ë‚˜ëˆ„ì–´ì§€ëŠ”ë°, Local Variable Array: ë§ ê·¸ëŒ€ë¡œ local variableì„ ë‹´ëŠ” arrayì´ë‹¤. Methodì˜ ëª¨ë“  parameterì™€ local variableë“¤ì„ ë‹´ê³ , arrayì˜ í•œ slotë‹¹ 4 Bytesê°€ í• ë‹¹ëœë‹¤. int, floatê³¼ referenceëŠ” 1 slotì„ ì°¨ì§€í•˜ê³  Byte, shortì™€ charì€ ë‹´ê¸°ê¸° ì „ì— int typeìœ¼ë¡œ ë³€í™˜ë˜ê¸° ë–„ë¬¸ì— ì—­ì‹œ 1 slotì„ ì°¨ì§€í•œë‹¤. doubleê³¼ longì€ 2 slotsì„ ì°¨ì§€í•˜ê³  Booleanì€ JVMë§ˆë‹¤ ë‹¤ë¥´ì§€ë§Œ ê±°ì˜ ëª¨ë“  JVMì´ 1 slotì„ í• ë‹¹í•œë‹¤. (e.g.) ì•„ë˜ ì½”ë“œ ì† parameterë“¤ì€ ê·¸ ì•„ë˜ ê·¸ë¦¼ì²˜ëŸ¼ local variable arrayì— ë‹´ê¸°ê²Œ ëœë‹¤. class Example { public void bike(int i, long l, float f, double d, Object o, byte b) { } } local_variable_array(geeksforgeeks.org) Operand stack: í•˜ë‚˜ì˜ workspace ë˜ëŠ” work area ë¼ê³  ìƒê°í•  ìˆ˜ ìˆê³ , calculation ì¤‘ê°„ì˜ ê²°ê³¼ë“¤ì„ ì €ì¥í•  ìˆ˜ ìˆëŠ” ì¥ì†Œì´ë‹¤\\ Frame data: Constant Pool, ì´ì „ ìŠ¤íƒ í”„ë ˆì„ì— ëŒ€í•œ ì •ë³´, í˜„ì¬ methodê°€ ì†í•œ í´ë˜ìŠ¤ì— ëŒ€í•œ reference ë“±ì˜ ì •ë³´ë¥¼ ê°–ëŠ”ë‹¤4). PC Registers: í•˜ë‚˜ì˜ thread ë‹¹ í•˜ë‚˜ì˜ PC registerê°€ ìƒì„±ëœë‹¤. PC registerëŠ” í˜„ì¬ ì‹¤í–‰ë˜ëŠ” instructionì˜ addressë¥¼ ê°€ì§€ê³  ìˆë‹¤. ë§Œì•½ í˜„ì¬ ì‹¤í–‰ë˜ëŠ” methodê°€ nativeë¼ë©´ PC registerì˜ ê°’ì€ undefinedì´ë‹¤5) Native Method Stack: Native methodì˜ ì •ë³´ë¥¼ ì €ì¥í•œë‹¤. í•˜ë‚˜ì˜ thread ë‹¹ í•˜ë‚˜ì˜ native method stackì´ ìƒì„±ëœë‹¤.ï¼’-â’Š Execution Engineexecution engine(geeksforgeeks.org)Execution Engineì€ RDAì— ë³€í™˜ë˜ì–´ ì €ì¥ëœ byte codeë¥¼ ë§ˆì¹˜ instruction ë‹¨ìœ„ë¡œ ì½ì–´ì„œ ë§ˆì¹˜ CPUì²˜ëŸ¼ í•˜ë‚˜ì”© ì‹¤í–‰í•œë‹¤. Byte code commandëŠ” 1-byteì˜ Opcodeì™€ Operandë¡œ ì´ë£¨ì–´ì ¸ ìˆëŠ”ë°, execution engineì€ Opcodeë¥¼ corresponding operandì™€ í•¨ê»˜ ì‹¤í–‰ì‹œí‚¤ê³  ë‹¤ìŒ Opcodeë¡œ ë„˜ì–´ê°„ë‹¤. ì´ ê³¼ì •ì€ execution engineì˜ ë‘ ìš”ì†Œì— ì˜í•´ ì´ë£¨ì–´ ì§„ë‹¤.1) Interpreter: InterpreterëŠ” byte code instructionì„ machine code instructionìœ¼ë¡œ ë³€í™˜í•œë‹¤.2) Just In Time(JIT) Compiler: JIT Compilerì˜ ëª©ì ì€ performance í–¥ìƒì´ë‹¤. JIT Complierì•ˆì˜ ProfilerëŠ” ì–´ë–¤ í•œ methodê°€ ê³„ì† ë°˜ë³µì ìœ¼ë¡œ ë¶ˆë¦¬ëŠ”ì§€ ê°ì§€í•˜ëŠ” ì—­í• ì„ í•œë‹¤. ë°˜ë³µì ìœ¼ë¡œ ë¶ˆë¦¬ëŠ” methodë¥¼ Hotspot ì´ë¼ê³  ë¶€ë¥´ë©° Hotspotì´ ì •í•´ì§„ thread hold value(JVMë§ˆë‹¤ ë‹¤ë¦„)ì— ë„ë‹¬í•˜ë©´ JIT Compilerê°€ ê·¸ Hotspotì— í•´ë‹¹ë˜ëŠ” native codeë¥¼ ìƒì„±í•œë‹¤. ê·¸ ë’¤ë¡œëŠ” interpreterê°€ ë§¤ ë²ˆ native codeë¡œ ë³€í™˜í•˜ëŠ” í”„ë¡œì„¸ìŠ¤ ëŒ€ì‹  JIT compilerì— ì˜í•´ ìƒì„±ëœ native codeê°€ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ performance í–¥ìƒì„ ì´ë£¬ë‹¤.â’Š RetrospectiveJVM architectureì— ê´€ë ¨ëœ ë™ì˜ìƒë„ ë§ì´ ë³´ê³ , ê¸€ë„ ë§ì´ ì½ìœ¼ë©´ì„œ ê³µë¶€í•  ë•ŒëŠ” ë„ˆë¬´ ì¬ë¯¸ìˆê³  ì‚¬ëŒë“¤ì—ê²Œ ì•Œë ¤ì¤„ ìƒê°ì— ë“¤ë–  ìˆì—ˆë‹¤. ê¸€ì„ ì ê¸° ì‹œì‘í•˜ë‹ˆ ë„ëŒ€ì²´ ì–´ë””ì„œë¶€í„° ì–´ë””ê¹Œì§€ ì„¤ëª…ì„ í•´ì•¼í•  ì§€ ê°ì´ ì•ˆì¡í˜”ë‹¤ğŸ˜­. ìì„¸íˆê¹Œì§€ëŠ” ì•Œ í•„ìš”ê°€ ì—†ì§€ë§Œ CPU architecture, Stack, Heap, references ë“±ì— ëŒ€í•œ ê¸°ë³¸ì ì¸ ì§€ì‹ì„ ê°€ì§„ ì‚¬ëŒì„ ë…ìë¡œ ì¡ê³  ê¸€ì„ ì¨ ë³´ì•˜ë‹¤. ê·¸ë ‡ì§€ ì•Šìœ¼ë©´ ëê¹Œì§€ ì½ëŠ” ì‚¬ëŒì´ ì†ì— ê¼½ì„ ì •ë„ë¡œ ê¸¸ê³  ì§€ë£¨í•œ ê¸€ì´ ë  ê²ƒ ê°™ì•˜ë‹¤(ê·¸ë ‡ê²Œ ìì„¸í•œ ê¸€ì„ ì“¸ ìì‹ ë„ ì—†ë‹¤ğŸ« ). ê·¸ë˜ë„ ì•„ì§ ë¶€ì¡±í•œ ê¸€ì´ë¼ ì´ë¯¸ì§€ë‚˜ ì˜ˆë¥¼ ë§ì´ ë„£ì–´ì„œ ì¡°ê¸ˆ ë” ì‰½ê²Œ ì´í•´í•  ìˆ˜ ìˆëŠ” ê¸€ë¡œ ì™„ì„± ì‹œì¼œì•¼ê² ë‹¤.â’‹ ReferencesHow JVM Works - JVM Architecture?waytoeasylearn.comThe JVM Architecture Explained - DzoneJVM Architecture -tutorial, Youtube" }, { "title": "JVM, JRE and JDK", "url": "/posts/jvm-jre-jdk/", "categories": "Programming, Java", "tags": "Java, JVM, JRE, JDK", "date": "2022-06-19 16:23:00 -0700", "snippet": "â’ˆ Backgroundì €ë²ˆ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ… ìŠ¤í„°ë”” ì¤‘ compilerì™€ interpreter ì´ì•¼ê¸°ê°€ ë‚˜ì™”ë‹¤. ìë°”ê°€ ì–´ë–»ê²Œ class íŒŒì¼ë¡œ ì»´íŒŒì¼ì´ ë˜ëŠ”ì§€, ê·¸ë¦¬ê³  ì‹¤í–‰ ë˜ëŠ”ì§€ ì´ì•¼ê¸° í•´ë³´ë‹¤ê°€ ì˜ˆì „ì— ê°™ì€ ê¶ê¸ˆì¦ì„ ê°€ì§€ê³  ì°¾ì•„ë³¸ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ê¸€ì„ ì‘ì„±í•´ë³¸ë‹¤.â’‰ What is JVM?Java Virtual Machine(JVM)ì€ Java byte codeë¥¼ machine codeë¡œ translateí•˜ì—¬ ì‹¤í–‰ ë  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µí•œë‹¤. Machine codeëŠ” í”„ë¡œì„¸ì„œë§ˆë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬¸ì—, ìš´ì˜ì²´ì œë§ˆë‹¤ í˜¹ì€ ê°™ì€ ìš´ì˜ì²´ì œì§€ë§Œ ë‹¤ë¥¸ ì•„í‚¤í…ì³ì—ì„œëŠ” ê°ê¸° ë‹¤ë¥¸ JVMì„ ì„¤ì¹˜í•´ì¤˜ì•¼ í•œë‹¤.JVMì€ ìë°”ì˜ ìŠ¬ë¡œê±´ì¸ Write once, run anywhere(WORE)ì˜ í•µì‹¬ ìš”ì†Œì¸ë° machine interfaceë¥¼ ì œê³µí•¨ìœ¼ë¡œì¨ ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„(êµ¬ì²´ì ìœ¼ë¡œëŠ” .class file) ì–´ë–¤ í™˜ê²½ì—ì„œë„ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•œë‹¤. ê·¸ëŸ¬í•œ ì´ìœ ë¡œ ìš°ë¦¬ëŠ” Javaë¥¼ platform-independentí•˜ë‹¤ê³  í•œë‹¤.tutorial.eyehunts.comê²°êµ­ ìš°ë¦¬ëŠ” ì½”ë“œë¥¼ ì“°ê³  ìˆëŠ” ìš´ì˜ì²´ì œì—ì„œ ì‹¤í–‰ ë˜ëŠ” ì½”ë“œë¥¼ ì“°ê³  ìˆëŠ” ê²Œ ì•„ë‹ˆë¼, JVMì—ì„œ ë³€í™˜ ë  ì½”ë“œë¥¼ ì“°ê³  ìˆë‹¤ê³  ìƒê°í•˜ë©´ ë” ì§ê´€ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆë‹¤.JVMë§Œì„ ë”°ë¡œ ì„¤ì¹˜í•  ìˆ˜ëŠ” ì—†ìœ¼ë©° JREë¥¼ ì„¤ì¹˜í•˜ë©´ í•¨ê»˜ ì„¤ì¹˜ëœë‹¤.JVMì— ëŒ€í•´ ë” ìì„¸í•œ ë‚´ìš©ì„ ì•Œê³  ì‹¶ë‹¤ë©´ğŸ‘‰ğŸ»How does JVM work(In progress)â’Š What is JRE?Java Runtime Environment(JRE)ëŠ” JVMì„ í¬í•¨í•´ì„œ ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ì‹œí‚¤ê¸° ìœ„í•´ í•„ìš”í•œ ê°ì¢… ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ íŒŒì¼ë“¤ì„ í¬í•¨í•˜ê³  ìˆë‹¤.ê°œë°œì„ í•˜ê¸° ìœ„í•´ì„œê°€ ì•„ë‹ˆê³  ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ì‹¤í–‰ë§Œ í•˜ê¸° ìœ„í•´ì„œë¼ë©´ JREë§Œ ì„¤ì¹˜í•˜ë©´ ëœë‹¤.â’‹ What is JDK?Java Development Kit(JDK)ëŠ” ìë°” ì–´í”Œë¦¬ì¼€ì´ì…˜ì„ ê°œë°œí•˜ê¸° ìœ„í•´ í•„ìš”í•œ íŒ¨í‚¤ì§€ì´ë‹¤. JDKëŠ” JREì™€ í•¨ê»˜ ê°œë°œì— í•„ìš”í•œ íˆ´(ì»´íŒŒì¼ëŸ¬, JavaDoc, ë””ë²„ê±° ë“±)ì„ í¬í•¨í•˜ê³  ìˆë‹¤.JREì™€ JDKì— í¬í•¨ë˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë‚˜ íŒŒì¼ë“¤ì€ ì´ ê·¸ë¦¼ì„ ì°¸ê³ í•˜ìğŸ‘‰ğŸ»JVM, JRE &amp; JDK (Complex version)â’Œ Conclusionë”°ë¼ì„œ JVM, JRE ê·¸ë¦¬ê³  JDKì˜ ê´€ê³„ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.JVM, JRE &amp; JDK(geeksforgeeks.org)ê·¸ë¦¬ê³  ë”ìš± ê¹Šê²Œ ì•Œê³  ì‹¶ì€ ë¶„ë“¤ì„ ìœ„í•´..ğŸ« JVM, JRE &amp; JDK(oracle.com)â’ ReferencesOracleDifference between JDK, JRE and JVM" }, { "title": "Lazy Loading", "url": "/posts/lazy-loading/", "categories": "Programming, Java", "tags": "Java, Database, Web Development, REST API, Spring", "date": "2022-06-11 01:28:00 -0700", "snippet": "â’ˆ BackgroundíšŒì‚¬ì—ì„œ DBì— Blob(Binary Large Object)ì„ ì—…ë¡œë“œí•˜ëŠ” REST APIë¥¼ ë§Œë“¤ê²Œ ë˜ì—ˆë‹¤. í˜„ì¬ëŠ” ì´ ì˜¤ë¸Œì íŠ¸ë§Œ ORMì—ì„œ ë¹ ì ¸ ìˆëŠ” ìƒíƒœì´ë‹¤. ê·¸ ì´ìœ ëŠ” ë§Œì•½ ì´ ì˜¤ë¸Œì íŠ¸ê°€ ì—…ë¡œë“œ ë  columnì„ ë‹¤ë¥¸ columnë“¤ê³¼ ê°™ì€ ë°©ë²•ìœ¼ë¡œ mappingì„ í•˜ë©´ í…Œì´ë¸”ì´ ì½í˜€ì§ˆ ë•Œë§ˆë‹¤ í•¨ê»˜ ì½í˜€ì§€ê¸° ë•Œë¬¸ì— Performanceê°€ ê°ì†Œí•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤. í˜„ì¬ ëŒì•„ê°€ëŠ” ì„œë¹„ìŠ¤ê°€ ì£¼ê¸°ì ìœ¼ë¡œ ì´ ì˜¤ë¸Œì íŠ¸ê°€ ì†í•œ í…Œì´ë¸”ì„ ì½ê³  ìˆê³ , ì„œë¹„ìŠ¤ê°€ ì´ ì˜¤ë¸Œì íŠ¸ë¥¼ ì„±ê³µì ìœ¼ë¡œ í•œ ë²ˆë§Œ ì½ìœ¼ë©´ ë˜ê¸° ë•Œë¬¸ì— Lazy Loadingì„ possible optionìœ¼ë¡œ ìƒê°í•˜ê³  ë””ìì¸ì¤‘ì´ë‹¤. íšŒì‚¬ì—ì„œ ì‚¬ìš©í•˜ê²Œ ë  í™˜ê²½ì€ Java Springì´ì§€ë§Œ ê²€ìƒ‰ ì¤‘ Lazy Loadingì´ í”„ë¡ íŠ¸ì—”ë“œì—ì„œë„ ì“°ì¸ë‹¤ëŠ” ê±¸ ì•Œê²Œ ëê³  í”„ë¡ íŠ¸ì—”ë“œ, ë°±ì—”ë“œ ê°œë°œì ëª¨ë‘ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ê¸€ì„ ì¨ë³´ë ¤ê³  í•œë‹¤.â’‰ What is Lazy Loading &amp; Eager Loading?Lazy Loadingì€ ë‹¤ë¥¸ ë§ë¡œ Asynchronous Loadingì´ë¼ê³ ë„ ë¶ˆë¦¬ë©°, ì»´í“¨í„° í”„ë¡œê·¸ë˜ë°ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë””ìì¸ íŒ¨í„´ì¤‘ì˜ í•œê°€ì§€ì´ë‹¤. ì£¼ë¡œ ì›¹ ì„œë¹„ìŠ¤ ê°œë°œ ì¤‘ ì˜¤ë¸Œì íŠ¸ì˜ initializationì„ í•„ìš”í•  ë•Œê¹Œì§€ ëŠ¦ì¶”ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤. ê°„ë‹¨í•œ ì˜ˆë¡œëŠ”, ì–´ë–¤ í•œ ì›¹ í˜ì´ì§€ì˜ ë°‘(ìŠ¤í¬ë¡¤ì„ ë‚´ë ¤ì•¼ë§Œ ë³¼ ìˆ˜ ìˆëŠ” ê³³)ì— ì¡´ì¬í•˜ëŠ” í•œ ì´ë¯¸ì§€ê°€ ìš°ë¦¬ê°€ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦¬ê¸° ì „ê¹Œì§€ëŠ” í•´ë‹¹ ì´ë¯¸ì§€ ì˜¤ë¸Œì íŠ¸ ëŒ€ì‹  placeholderê°€ ì¡´ì¬í•˜ë‹¤ê°€ ìŠ¤í¬ë¡¤ì„ ë‚´ë ¸ì„ ë•Œì—ì„œì•¼ ê·¸ ì´ë¯¸ì§€ë¥¼ ë¡œë”©í•˜ëŠ” ê²ƒì´ ìˆë‹¤.Lazy Loadingì˜ ë°˜ëŒ€ë¡œëŠ” Eager Loadingì´ ìˆë‹¤. Eager Loadingì€ Pre-loadingì´ë¼ê³ ë„ ë¶ˆë¦¬ë©° í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ë©´(ì½”ë“œê°€ executeë˜ë©´) ëª¨ë“  resourcesë¥¼ ëª¨ë‘ ë¶ˆëŸ¬ì˜¨ë‹¤. ìš°ë¦¬ê°€ ì´ ë¸”ë¡œê·¸ë¥¼ ì—´ì—ˆì„ ë•Œ ì´ ë¸”ë¡œê·¸ ì•ˆì˜ ëª¨ë“  ê¸€, ì´ë¯¸ì§€, ë™ì˜ìƒ ë“±ì´ í•œ ë²ˆì— ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì„ ì˜ˆë¡œ ë“¤ ìˆ˜ ìˆë‹¤.â’Š Why do we use Lazy Loading?Lazy Loadingì„ ì“°ëŠ” ì´ìœ ë¡œëŠ” ë‹¨ì—° performance enhancementê°€ ê¼½íˆê² ë‹¤. ì¡°ê¸ˆ ë” ìì„¸íˆ ì„¤ëª…í•˜ë©´, Reduced initial load time/memory ëª¨ë“  resourceê°€ ì•„ë‹Œ ì¼ë¶€ë¶„ë§Œ ì²˜ìŒì— ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì— load timeì´ ì¤„ì–´ë“¤ê³  ë¶ˆëŸ¬ì˜¤ì§€ ì•Šì€ resources ë•ë¶„ì— ì‚¬ìš©í•  ë©”ëª¨ë¦¬ë„ ì ì–´ì§„ë‹¤ Faster connection to users; better user experience ì¤„ì–´ë“œëŠ” load timeì€ ìœ ì €ë“¤ì—ê²Œ ë” ë¹ ë¥¸ contents ì œê³µì„ ë³´ì¥í•œë‹¤ Avoiding unnecessary code execution ê°™ì€ ë§¥ë½ìœ¼ë¡œ Lazy loadingìœ¼ë¡œ ë¶ˆë ¤ì˜¬ resourcesì— ëŒ€í•œ ì½”ë“œë“¤ì€ ë¶ˆí•„ìš”í•œ ì‹¤í–‰ì„ í”¼í•  ìˆ˜ ìˆë‹¤ Cost-effective time/memory ìµœì í™”ë¡œ ë¶ˆí•„ìš”í•œ resourcesë“¤ì„ ë¶ˆëŸ¬ì˜¤ì§€ ì•ŠìŒìœ¼ë¡œì¨ ìš´ì˜ë¹„ìš©ì„ ì•„ë‚„ ìˆ˜ ìˆë‹¤ ë‹¨ì ë„ ì¡´ì¬í•˜ëŠ”ë°, Extra codes Lazy Loadingì„ ìœ„í•´ì„œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ì½”ë“œê°€ ë‹¹ì—°íˆ í•„ìš”í•˜ê³ , ë•Œë¡œëŠ” ìƒê° ì™¸ë¡œ ë³µì¡í•´ì§ˆ ìˆ˜ ìˆë‹¤.(í¸í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì ì  ë§ì€ ë°©ë²•ë“¤ì´ ê°œë°œë˜ê³  ìˆë‹¤) Low web rankings Initial load ë˜ì§€ ì•ŠëŠ” í˜ì´ì§€ë“¤ì´ ì¡´ì¬í•œë‹¤ë©´ Search Engine Optimization(SEO) ê²°ê³¼ì— ì˜í–¥ì„ ë¯¸ì¹  ìˆ˜ ìˆë‹¤. â’‹ Where is Lazy Loading used?ì´ ê¸€ì„ ì‘ì„±í•˜ë ¤ê³  ê²€ìƒ‰ í•´ ë³´ê¸° ì „ê¹Œì§€ëŠ” í”„ë¡ íŠ¸ì—”ë“œì—ì„œ Lazy Loadingì´ ì‚¬ìš© ëœë‹¤ëŠ” ê±´ ìƒê°ì„ í•´ë³´ì§€ ì•Šì•˜ëŠ”ë° ë„ˆë¬´ë‚˜ ë‹¹ì—°í•œ ì‚¬ì‹¤ì´ì—ˆë‹¤. í¸í˜‘í•œ ì‹œì•¼ë¥¼ ì–¸ì œì¯¤ ë„“í ìˆ˜ ìˆì„ê¹ŒğŸ˜¢í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œ í•œ ê°€ì§€ì”© ì˜ˆë¥¼ ë“¤ì–´ì„œ Lazy Loadingì´ ì–´ë–»ê²Œ ì‚¬ìš© ë  ìˆ˜ ìˆëŠ” ì§€ ë³´ë ¤ê³  í•œë‹¤.Front-endimport React, { Suspense, lazy } from 'react';import { BrowserRouter as Router, Route, Switch } from 'react -router-dom';// lazy-loading syntax in ReactJSconst About = lazy(() =&gt; import('./About'));const App = () =&gt; ( // ... &lt;Route path=\"/\" exact render={() =&gt; ( &lt;div&gt; &lt;h1&gt;This is the main page&lt;/h1&gt; &lt;a href=\"/about\"&gt;Click here&lt;/a&gt; &lt;/div&gt; )} /&gt; // ...);export default App;import React from 'react';const About = () =&gt; { return ( &lt;div&gt; &lt;h1&gt;This is the about section&lt;/h1&gt; &lt;/div&gt; );};export default About; OutputAbout í˜ì´ì§€ëŠ” Click here ë§í¬ë¥¼ í´ë¦­í•´ì•¼ë§Œ render ëœë‹¤Back-endpublic class Item { ... @JsonIgnore @OneToMany(cascade = CascadeType.ALL, mappedBy = \"item\") private List&lt;PurchaseItem&gt; purchaseItems = new ArrayList&lt;&gt;(); ...}public class PurchaseItem { ... @JoinColumn(name = \"item_id\") // lazy-loading syntax in Java Spring @ManyToOne(fetch = LAZY, cascade = CascadeType.PERSIST) private Item item; ...}ì‘ë…„ì— ì·¨ì—… ì¤€ë¹„í•˜ë©´ì„œ ë§Œë“¤ì—ˆë˜ í† ì´ í”„ë¡œì íŠ¸ì—ì„œ ë§ˆì¹¨ lazy loadingì„ ì¼ë˜ ì˜ˆê°€ ìˆì–´ì„œ ê°€ì§€ê³  ì™”ë‹¤.Inventory Management Systemì„ ë§Œë“¤ì—ˆëŠ”ë° Itemì€ ë§ì€ PurchaseItemì„ Listë¡œ ê°€ì§ˆ ìˆ˜ ìˆê³ , ì´ PurchaseItemë“¤ì€ ì˜ìˆ˜ì¦ì— ë³´ì—¬ì§€ê²Œ ëœë‹¤. ìœ ì €ê°€ êµ¬ë§¤í•  ë•ŒëŠ” ë‹¹ì—°íˆ í•„ìš”ê°€ ì—†ê³  êµ¬ë§¤ í›„ì—ë§Œ ë³´ì—¬ì§€ë©´ ë˜ê¸° ë•Œë¬¸ì— lazy loadingì„ ì‚¬ìš©í–ˆë‹¤. ë§Œì•½ lazy loadingì„ í•˜ì§€ ì•ŠëŠ”ë‹¤ë©´ ì‹œìŠ¤í…œì„ ì¼œëŠ” ìˆœê°„ Itemë“¤ê³¼ í•¨ê»˜ ëª¨ë“  ê³ ê°ë“¤ì´ êµ¬ë§¤í–ˆë˜ Itemë“¤ì´ í•„ìš” í•˜ì§€ë„ ì•Šì€ë° ëª¨ë‘ load ë  ê²ƒ ì´ê³  ë‹¹ì—°íˆ time/memory wasteê°€ ë°œìƒí•œë‹¤.ì‘ì€ í”„ë¡œì íŠ¸ ì˜€ì§€ë§Œ, ê³µë¶€ë¥¼ ëª©ì ìœ¼ë¡œ ë§Œë“¤ì—ˆê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ í° ì‹œìŠ¤í…œì´ë€ ê°€ì • í•˜ì— performanceë¥¼ ë†’ì´ê¸° ìœ„í•´ ì‚¬ìš©í•´ ë³´ì•˜ë‹¤.â’Œ ConclusionLazy Loadingì˜ ë‹¨ì ì„ ìƒê°í•´ë³´ì§€ëŠ” ì•Šì•˜ëŠ”ë°, ì´ë²ˆ REST APIë¥¼ ê°œë°œ í•˜ëŠ” ë°ì— ìˆì–´ì„œëŠ” í° ê±¸ë¦¼ëŒì´ ë  ê²ƒ ê°™ì§€ëŠ” ì•Šë‹¤. ê¼­ í•„ìš”í•œ ì½”ë“œì´ê¸° ë•Œë¬¸ì— ì²«ë²ˆì§¸ ë‹¨ì (extra code)ì€ í•´ë‹¹ì´ ì•ˆë˜ê³ , ë‘ë²ˆì§¸ ë‹¨ì (SEO results)ë„ í•´ë‹¹ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤. ë‹¤ìŒì£¼ì— ì•± ë””ìì¸ ë¦¬ë·° ë¯¸íŒ…ì´ ìˆëŠ”ë° ì´ ê¸€ì„ ë°”íƒ•ìœ¼ë¡œ ì„¤ëª…í•˜ë©° ë˜ ë‹¤ë¥¸ pitfallsì´ ìˆëŠ”ì§€ í”¼ë“œë°±ë„ ë°›ì•„ë³´ê³  ìƒˆë¡œìš´ ì ì´ ìˆìœ¼ë©´ ì—…ë°ì´íŠ¸ í•´ì•¼ì§€.â’ ReferencesLazy Loading - WikipediaWhat is Lazy Loading - GeeksforGeeksLazy Loading in ReactJS - TutorialsPointHow to Set Up Lazy Loading for Optimal SEO Results" } ]